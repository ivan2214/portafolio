---
import { Image } from '@astrojs/image/components'
import GitHubIcon from './GitHubIcon.astro'
import TwitterIcon from './TwitterIcon.astro'
import LinkedinIcon from './LinkedinIcon.astro'
---

<div class='drawer-side bg-base-200'>
  <label for='my-drawer' class='drawer-overlay bg-base-200'></label>
  <div
    class='menu flex flex-col flex-nowrap p-4 overflow-y-auto w-[20rem] bg-base-200 text-base-content'
  >
    <div class='w-fit'>
      <a href='/'>
        <div
          class='avatar transition ease-in-out w-1/2 hover:scale-[102%] block m-auto mt-3 mb-6 h-36'
        >
          <div>
            <Image
              class='mask mask-circle'
              aspectRatio='1:1'
              format='webp'
              width={300}
              height={300}
              src='/profile.png'
              alt='Profile image'
            />
          </div>
        </div>
      </a>
    </div>
    <ul class='grow shrink'>
      <!-- Sidebar content here -->
      <li><a id='home' href='/'>Inicio</a></li>
      <li><a id='projects' href='/projects'>Proyectos</a></li>
      <li><a id='services' href='/services'>Servicios</a></li>
      <li><a id='blog' href='/blog/'>Blog</a></li>
      <li><a id='cv' href='/cv'>CV</a></li>
      <li><a href='mailto:bongiovanniivan12@gmail.com'>Contactame</a></li>
    </ul>
    <div class='social-icons px-4 my-2 flex self-center'>
      <a
        href='https://github.com/ivan2214'
        target='_blank'
        class='mx-3'
        aria-label='Github'
        title='Github'
      >
        <GitHubIcon />
      </a>
      <a
        href='https://twitter.com/bongiovanniDev'
        target='_blank'
        class='mx-3'
        aria-label='Twitter'
        title='Twitter'
      >
        <TwitterIcon />
      </a>
      <a
        href='https://www.linkedin.com/in/bongiovanni-ivan45'
        target='_blank'
        class='mx-3'
        aria-label='Linkedin'
        title='Linkedin'
      >
        <LinkedinIcon />
      </a>
    </div>
  </div>
</div>
<script>
  const homeLink = document.getElementById('home')
  const projectsLink = document.getElementById('projects')
  const servicesLink = document.getElementById('services')
  const blogLink = document.getElementById('blog')
  const cvLink = document.getElementById('cv')

  var isHome = true

  const url = window.location.href

  const pages = [projectsLink, servicesLink, blogLink, cvLink]

  const activeClass = 'bg-base-300' // For primary color replace with `active` class

  pages.forEach((elem) => {
    if (elem?.id && url.includes(elem.id)) {
      isHome = false
      elem?.classList.add(activeClass)
    }
  })
  if (isHome) {
    homeLink?.classList.add(activeClass)
  }
</script>
